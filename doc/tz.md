# Техническое задание (ТЗ) для разработки телеграм-бота записи на обслуживание

## Основные роли:

1. **Клиент** — пользователь, который может просматривать услуги и записываться на визиты.
2. **Вендор** — пользователь, который создаёт и управляет своими услугами (сервисами), а также управляет визитами
   клиентов.

## Основной функционал:

### 1. Регистрация и выбор роли (Команда `/start`):

- По команде `/start` новый пользователь должен выбрать одну из ролей: Клиент или Вендор.
- Если пользователь уже зарегистрирован, ему предоставляется возможность сменить текущую роль.
- Это диалог с пользователем, который сохраняет выбранную роль в базе данных.

### 2. Команды для Вендора:

- **`/service_create`** — создание нового сервиса. Вендор указывает название и описание сервиса.
- **`/service_read`** — просмотр информации о конкретном сервисе.
- **`/service_update`** — обновление информации о сервисе.
- **`/service_delete`** — удаление сервиса.
- **`/service_list`** — просмотр всех созданных Вендором сервисов.
- **`/visit_list`** — просмотр всех визитов на услуги Вендора.
- **`/visit_queue`** — просмотр заявок на посещение сервисов.
- **`/visit_approve`** — подтверждение заявки клиента на визит.
- **`/visit_decline`** — отклонение заявки клиента на визит.

### 3. Команды для Клиента:

- **`/service_list`** — просмотр списка всех доступных сервисов.
- **`/service_read`** — просмотр информации о конкретном сервисе.
- **`/visit_service`** — регистрация визита на выбранный сервис.
- **`/visit_list`** — просмотр всех визитов клиента.
- **`/visit_delete`** — отмена записи на визит.

## Рабочие часы:

- Все сервисы работают с 10:00 до 18:00 с понедельника по пятницу. Это фиксировано, и изменения в расписании сервисов не
  предусмотрены.

## Основные сценарии:

### 1. Регистрация пользователя:

- Пользователь отправляет команду `/start`, после чего начинается диалог, где он выбирает одну из ролей: Клиент или
  Вендор.
- После выбора роли сохраняются данные пользователя и его статус в базе данных.

### 2. Создание и управление сервисами (Вендор):

- Вендор создает и управляет своими сервисами через команды `/service_create`, `/service_update`, `/service_delete`.
- Он может просматривать свои сервисы и управлять записями клиентов на визиты.

### 3. Запись на визит (Клиент):

- Клиент может просматривать доступные сервисы через команду `/service_list` и записываться на визит с помощью команды
  `/visit_service`.
- Клиент также может отменить свою запись на визит через команду `/visit_delete`.

### 4. Управление визитами (Вендор):

- Вендор может просматривать заявки клиентов через команды `/visit_queue` и подтверждать или отклонять визиты с помощью
  команд `/visit_approve` и `/visit_decline`.

## Технические требования:

- **Node.js** — серверная часть бота.
- **grammY** — библиотека для работы с Telegram API.
- **PostgreSQL или другая knex-совместимая БД** — для хранения информации о пользователях, сервисах и визитах.

## Оценка времени разработки:

1. **Регистрация и выбор роли (диалог при старте)**:
    - 8–10 часов

2. **Разработка команд для Вендора**:
    - `/service_create`, `/service_read`, `/service_update`, `/service_delete`, `/service_list`: 12–16 часов
    - `/visit_list`, `/visit_queue`, `/visit_approve`, `/visit_decline`: 10–12 часов

3. **Разработка команд для Клиента**:
    - `/service_list`, `/service_read`, `/visit_service`, `/visit_list`, `/visit_delete`: 10–12 часов

4. **Тестирование и оптимизация**:
    - 6–8 часов

5. **Документация и развертывание**:
    - 4–6 часов

**Итого**: 50–64 часов на полную разработку и тестирование бота.
